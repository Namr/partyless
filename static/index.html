<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Partyless</title>

  <!-- (Optional) Bootstrap for base resets & grid; we’ll override styles -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="styles.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"></script>
</head>

<body>
  <div class="shell">
    <header>
      <div class="brand">
        <h1><a href="https://github.com/Namr/partyless">Partyless</a></h1>
      </div>
      <div class="tag">RSVPs without the BS</div>
    </header>

    <main>
      <div class="card">
        <!-- Loud left panel -->
        <aside class="card-aside">
          <h2>Build an invite in seconds</h2>
          <div class="bullets">
            <div class="pill">No accounts. No ads. No tracking.</div>
            <div class="pill">Just a link your guests can tap.</div>
            <div class="pill"><a href="https://github.com/Namr/partyless">Free forever.</a></div>
          </div>
        </aside>

        <!-- Form -->
        <form hx-post="/event" hx-on::after-request="this.reset()" novalidate>
          <div class="group">
            <label for="event_name">Event Name</label>
            <input type="text" class="form-control" id="event_name" name="event_name" placeholder="Summer BBQ Party" autocomplete="off" maxlength="30"/>
          </div>

          <div class="group">
            <label for="hosts_name">Host's Name</label>
            <input type="text" class="form-control" id="hosts_name" name="hosts_name" placeholder="Jane Doe" autocomplete="off" maxlength="40"/>
          </div>

          <div class="group">
            <label for="address">Event Address</label>
            <input type="text" class="form-control" id="address" name="address" placeholder="123 Main Street, City, State" autocomplete="off" maxlength="50"/>
          </div>

          <div class="group">
            <label for="description">Description</label>
            <textarea class="form-control" id="description" name="description" rows="3" placeholder="Tell your guests about your event..." autocomplete="off" maxlength="700"></textarea>
          </div>

          <div class="row-lite">
            <div class="group">
              <label for="date">Date</label>
              <input type="date" class="form-control" id="date" name="date"/>
            </div>
            <div class="group">
              <label for="time">Start Time</label>
              <input type="time" class="form-control" id="time" name="time"/>
            </div>
            <div class="group">
              <label for="timezone">Time Zone</label>
              <select class="form-select" id="timezone" name="timezone">
                <option value="">Loading time zones…</option>
              </select>
            </div>
          </div>

          <div class="group password-group">
            <label for="password">
              Password
              <span class="label-hint">(optional, 5-24 chars)</span>
            </label>
            <input
              type="password"
              class="form-control"
              id="password"
              name="password"
              minlength="5"
              maxlength="24"
              autocomplete="new-password"
              placeholder="Leave blank to skip"
            />
            <p class="field-note">You will need this if you want to update the invite later.</p>
          </div>

          <button type="submit" class="btn btn-primary mt-2">Create Invite</button>
        </form>
      </div>
    </main>
  </div>

  <script>
    // Populate time zones (kept from your original)
    (function () {
      const select = document.getElementById('timezone');
      if (!select) return;

      const replaceUnderscores = (value) => value.replace(/_/g, ' ');
      const detectedZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const zones = typeof Intl.supportedValuesOf === 'function'
        ? Intl.supportedValuesOf('timeZone')
        : [detectedZone];

      select.innerHTML = '';
      zones.forEach((zone) => {
        const option = document.createElement('option');
        option.value = zone;
        option.textContent = replaceUnderscores(zone);
        select.appendChild(option);
      });

      if (detectedZone) {
        const match = Array.from(select.options).some((opt) => opt.value === detectedZone);
        if (!match) {
          const option = document.createElement('option');
          option.value = detectedZone;
          option.textContent = replaceUnderscores(detectedZone);
          select.appendChild(option);
        }
        select.value = detectedZone;
      }
    })();
  </script>
</body>
</html>
